<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>PropIA ‚Äî IA para Agentes de Bienes Ra√≠ces Latinos</title>
<link rel="preconnect" href="https://fonts.googleapis.com"/>
<link href="https://fonts.googleapis.com/css2?family=Onest:wght@300;400;500;600;700;800;900&family=DM+Mono:wght@400;500&display=swap" rel="stylesheet"/>
<style>
* { box-sizing: border-box; margin: 0; padding: 0; }
html, body { height: 100%; }

body {
  font-family: 'Onest', sans-serif;
  min-height: 100vh;
  background: #04060e;
  position: relative;
  overflow-x: hidden;
}

/* =============================================
   BACKGROUND SCENE ‚Äî vivid blobs that the
   glass panels will visibly blur and tint over
   ============================================= */
#bg {
  position: fixed;
  inset: 0;
  z-index: 0;
  overflow: hidden;
}

/* BLOB 1 ‚Äî large cyan top-left */
#bg .b1 {
  position: absolute;
  width: 720px; height: 720px;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(6,182,212,0.75) 0%, rgba(6,182,212,0.30) 40%, transparent 70%);
  top: -200px; left: -160px;
  filter: blur(0px);
  animation: float1 12s ease-in-out infinite alternate;
}
/* BLOB 2 ‚Äî violet bottom-right */
#bg .b2 {
  position: absolute;
  width: 660px; height: 660px;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(139,92,246,0.70) 0%, rgba(139,92,246,0.28) 40%, transparent 70%);
  bottom: -180px; right: -140px;
  animation: float2 14s ease-in-out infinite alternate;
}
/* BLOB 3 ‚Äî teal center accent */
#bg .b3 {
  position: absolute;
  width: 420px; height: 420px;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(20,184,166,0.45) 0%, transparent 65%);
  top: 45%; left: 40%;
  transform: translate(-50%,-50%);
  animation: float3 10s ease-in-out infinite alternate;
}
/* BLOB 4 ‚Äî indigo extra top-right */
#bg .b4 {
  position: absolute;
  width: 400px; height: 400px;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(99,102,241,0.50) 0%, transparent 65%);
  top: -80px; right: 25%;
  animation: float1 16s ease-in-out infinite alternate;
}

@keyframes float1 { 0%{transform:translate(0,0);} 100%{transform:translate(40px,30px);} }
@keyframes float2 { 0%{transform:translate(0,0);} 100%{transform:translate(-35px,-25px);} }
@keyframes float3 { 0%{transform:translate(-50%,-50%);} 100%{transform:translate(-46%,-54%);} }

/* dot grid on top of blobs */
#bg .grid {
  position: absolute; inset: 0;
  background-image: radial-gradient(circle, rgba(255,255,255,0.07) 1px, transparent 1px);
  background-size: 32px 32px;
}

/* =============================================
   LAYOUT ‚Äî grid over the blobs
   ============================================= */
.layout {
  position: relative;
  z-index: 2;
  min-height: 100vh;
  display: grid;
  grid-template-columns: 1.15fr 0.85fr;
}

@media(max-width:768px) {
  .layout { display: block; }
  .left { display: none; }
}

/* =============================================
   LEFT PANEL ‚Äî glass
   ============================================= */
.left {
  /* very transparent so blobs bleed through */
  background: rgba(4,6,14,0.30);
  backdrop-filter: blur(36px) saturate(200%);
  -webkit-backdrop-filter: blur(36px) saturate(200%);
  border-right: 1px solid rgba(255,255,255,0.10);
  padding: 52px 56px;
  display: flex; flex-direction: column; justify-content: space-between;
  position: relative; overflow: hidden; min-height: 100vh;
}
/* top shimmer line */
.left::after {
  content: '';
  position: absolute; top: 0; left: 0; right: 0; height: 1px;
  background: linear-gradient(90deg, transparent, rgba(6,182,212,0.8), rgba(139,92,246,0.5), transparent);
}

.logo { display: flex; align-items: center; gap: 14px; }
.logo-mark {
  width: 50px; height: 50px;
  background: linear-gradient(135deg, #06b6d4, #0e7490);
  border-radius: 14px;
  display: flex; align-items: center; justify-content: center;
  font-size: 24px; flex-shrink: 0;
  box-shadow: 0 0 32px rgba(6,182,212,0.6), inset 0 1px 0 rgba(255,255,255,0.25);
}
.logo-name { font-size: 28px; font-weight: 900; color: #f1f5f9; letter-spacing: -1px; }
.logo-name span { color: #22d3ee; }

.ai-pill {
  display: inline-flex; align-items: center; gap: 9px;
  padding: 8px 18px; margin-bottom: 32px;
  background: rgba(6,182,212,0.15);
  backdrop-filter: blur(20px);
  border: 1px solid rgba(6,182,212,0.40);
  border-radius: 30px;
  font-size: 14px; font-weight: 600; color: #67e8f9;
}
.ai-dot {
  width: 9px; height: 9px; border-radius: 50%;
  background: #06b6d4;
  box-shadow: 0 0 12px #06b6d4, 0 0 24px rgba(6,182,212,0.6);
  animation: pulsedot 2s ease-in-out infinite;
}
@keyframes pulsedot { 0%,100%{transform:scale(1);} 50%{transform:scale(1.5);} }

.headline {
  font-size: clamp(36px, 3.8vw, 58px);
  font-weight: 900; line-height: 1.03;
  letter-spacing: -3px; color: #f1f5f9;
  margin-bottom: 24px;
}
.headline .grad {
  background: linear-gradient(90deg, #22d3ee, #a78bfa, #f0abfc, #22d3ee);
  background-size: 300% auto;
  -webkit-background-clip: text; -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: shimmer 5s linear infinite;
}
@keyframes shimmer { to { background-position: 300% center; } }

.tagline {
  font-size: 18px; line-height: 1.80;
  color: rgba(203,213,225,0.80);
  max-width: 400px; margin-bottom: 44px;
}

.feats { display: flex; flex-direction: column; gap: 11px; }
.feat {
  display: flex; align-items: center; gap: 15px;
  padding: 15px 20px;
  background: rgba(255,255,255,0.05);
  backdrop-filter: blur(20px);
  border: 1px solid rgba(255,255,255,0.10);
  border-radius: 14px;
  transition: all 0.25s;
}
.feat:hover {
  background: rgba(6,182,212,0.10);
  border-color: rgba(6,182,212,0.35);
  transform: translateX(5px);
  box-shadow: 0 4px 24px rgba(6,182,212,0.10);
}
.feat-icon { font-size: 22px; flex-shrink: 0; }
.feat-title { font-size: 16px; font-weight: 700; color: #e2e8f0; margin-bottom: 2px; }
.feat-sub   { font-size: 14px; color: rgba(148,163,184,0.75); }

.left-foot {
  font-size: 13px; color: rgba(148,163,184,0.40);
  padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.07);
  display: flex; align-items: center; justify-content: space-between;
}
.ssl { display: flex; align-items: center; gap: 5px; font-size: 12px; font-weight: 700;
  color: #34d399; background: rgba(52,211,153,0.10);
  border: 1px solid rgba(52,211,153,0.25); border-radius: 20px; padding: 4px 12px;
}

/* =============================================
   RIGHT PANEL ‚Äî glass (lighter)
   ============================================= */
.right {
  background: rgba(4,6,14,0.40);
  backdrop-filter: blur(48px) saturate(180%);
  -webkit-backdrop-filter: blur(48px) saturate(180%);
  display: flex; align-items: center; justify-content: center;
  padding: 40px 52px; min-height: 100vh; overflow-y: auto;
  position: relative;
}
.right::after {
  content: '';
  position: absolute; top: 0; left: 0; right: 0; height: 1px;
  background: linear-gradient(90deg, transparent, rgba(139,92,246,0.7), rgba(6,182,212,0.4), transparent);
}
@media(max-width:768px) { .right { padding: 32px 20px; } }

.auth-box { width: 100%; max-width: 420px; position: relative; z-index: 1; }

.mobile-logo { display: none; align-items: center; gap: 11px; margin-bottom: 28px; }
.mobile-logo-mark {
  width: 42px; height: 42px;
  background: linear-gradient(135deg,#06b6d4,#0e7490);
  border-radius: 11px; display: flex; align-items: center; justify-content: center;
  font-size: 20px; box-shadow: 0 0 22px rgba(6,182,212,0.5);
}
.mobile-logo-name { font-size: 24px; font-weight: 900; color: #f1f5f9; letter-spacing: -0.8px; }
.mobile-logo-name span { color: #22d3ee; }
@media(max-width:768px) { .mobile-logo { display: flex; } }

/* switcher */
.auth-switcher {
  display: flex; gap: 4px;
  background: rgba(255,255,255,0.06);
  backdrop-filter: blur(24px);
  border: 1px solid rgba(255,255,255,0.12);
  border-radius: 18px; padding: 5px;
  margin-bottom: 32px;
}
.auth-tab {
  flex: 1; background: none; border: none;
  color: rgba(148,163,184,0.80);
  font-family: 'Onest', sans-serif;
  font-size: 16px; font-weight: 600; padding: 12px;
  cursor: pointer; transition: all 0.2s; border-radius: 13px;
}
.auth-tab.active {
  background: linear-gradient(135deg, #06b6d4, #0e7490);
  color: #04060e; font-weight: 800;
  box-shadow: 0 4px 24px rgba(6,182,212,0.50);
}

.auth-form { display: flex; flex-direction: column; gap: 20px; }
.auth-form.hidden { display: none; }

.form-title {
  font-size: 34px; font-weight: 900;
  color: #f1f5f9; letter-spacing: -1.5px; margin-bottom: 5px;
}
.form-subtitle { font-size: 17px; color: rgba(148,163,184,0.80); line-height: 1.55; }

.field label {
  display: block; font-size: 12px; font-weight: 800;
  color: rgba(148,163,184,0.60); text-transform: uppercase;
  letter-spacing: 1.2px; margin-bottom: 8px;
}
.field input {
  width: 100%;
  background: rgba(255,255,255,0.07);
  backdrop-filter: blur(16px);
  border: 1px solid rgba(255,255,255,0.13);
  border-radius: 14px; color: #f1f5f9;
  font-family: 'Onest', sans-serif;
  font-size: 17px; padding: 15px 17px; outline: none;
  transition: all 0.22s;
}
.field input:focus {
  background: rgba(6,182,212,0.09);
  border-color: rgba(6,182,212,0.55);
  box-shadow: 0 0 0 4px rgba(6,182,212,0.14);
}
.field input::placeholder { color: rgba(148,163,184,0.30); }

.btn-submit {
  width: 100%;
  background: linear-gradient(135deg, #06b6d4, #0e7490);
  border: none; border-radius: 15px;
  color: #04060e;
  font-family: 'Onest', sans-serif;
  font-size: 18px; font-weight: 900;
  padding: 17px; cursor: pointer;
  transition: all 0.25s; margin-top: 4px;
  box-shadow: 0 8px 30px rgba(6,182,212,0.45), inset 0 1px 0 rgba(255,255,255,0.25);
  position: relative; overflow: hidden;
}
.btn-submit::after {
  content: ''; position: absolute; inset: 0;
  background: linear-gradient(135deg, rgba(255,255,255,0.18), transparent 55%);
}
.btn-submit:hover {
  filter: brightness(1.1); transform: translateY(-2px);
  box-shadow: 0 14px 40px rgba(6,182,212,0.60);
}
.btn-submit:active { transform: translateY(0); }
.btn-submit:disabled { opacity: 0.35; cursor: not-allowed; transform: none; box-shadow: none; filter: none; }
.btn-submit .loading { display: none; align-items: center; justify-content: center; gap: 10px; }
.btn-submit.is-loading .label { display: none; }
.btn-submit.is-loading .loading { display: flex; }

.spinner {
  width: 18px; height: 18px;
  border: 2px solid rgba(4,6,14,0.3); border-top-color: #04060e;
  border-radius: 50%; animation: spin 0.7s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }

.divider {
  display: flex; align-items: center; gap: 14px;
  color: rgba(148,163,184,0.35); font-size: 14px;
}
.divider::before, .divider::after {
  content: ''; flex: 1; height: 1px;
  background: rgba(255,255,255,0.08);
}

.plan-badge {
  background: rgba(6,182,212,0.08);
  backdrop-filter: blur(20px);
  border: 1px solid rgba(6,182,212,0.25);
  border-radius: 15px; padding: 17px 19px;
  font-size: 15px; line-height: 1.70; color: rgba(148,163,184,0.80);
}
.plan-badge strong { color: #22d3ee; font-weight: 800; }

.alert {
  border-radius: 13px; padding: 14px 16px;
  font-size: 15px; line-height: 1.5; font-weight: 600; display: none;
}
.alert.success {
  background: rgba(52,211,153,0.10); backdrop-filter: blur(12px);
  border: 1px solid rgba(52,211,153,0.28); color: #34d399; display: block;
}
.alert.error {
  background: rgba(248,113,113,0.09); backdrop-filter: blur(12px);
  border: 1px solid rgba(248,113,113,0.25); color: #f87171; display: block;
}
.alert.visible { display: block; }
</style>
</head>
<body>

<!-- BACKGROUND SCENE ‚Äî real divs, not pseudo-elements -->
<div id="bg">
  <div class="b1"></div>
  <div class="b2"></div>
  <div class="b3"></div>
  <div class="b4"></div>
  <div class="grid"></div>
</div>

<div class="layout">
  <div class="left">
    <div class="logo">
      <div class="logo-mark">üè†</div>
      <div class="logo-name">Prop<span>IA</span></div>
    </div>

    <div>
      <div class="ai-pill">
        <div class="ai-dot"></div>
        Sistema de IA activo ¬∑ En l√≠nea
      </div>
      <h1 class="headline">
        La IA que trabaja<br>
        para <span class="grad">agentes latinos</span><br>
        en USA
      </h1>
      <p class="tagline">Genera listings profesionales, califica leads autom√°ticamente y ret√©n a tus clientes ‚Äî todo en espa√±ol, todo con IA.</p>
      <div class="feats">
        <div class="feat"><div class="feat-icon">‚ö°</div><div><div class="feat-title">Contenido en 30 segundos</div><div class="feat-sub">MLS, posts y email generados al instante</div></div></div>
        <div class="feat"><div class="feat-icon">ü§ñ</div><div><div class="feat-title">IA trabaja 24/7 por ti</div><div class="feat-sub">Calificaci√≥n autom√°tica mientras t√∫ cierras</div></div></div>
        <div class="feat"><div class="feat-icon">üìä</div><div><div class="feat-title">Dashboard para brokers</div><div class="feat-sub">Todo tu equipo en un solo lugar</div></div></div>
        <div class="feat"><div class="feat-icon">üîí</div><div><div class="feat-title">100% seguro y privado</div><div class="feat-sub">Tus datos siempre bajo tu control</div></div></div>
      </div>
    </div>

    <div class="left-foot">
      <span>¬© 2025 PropIA ¬∑ Comunidad latina en USA</span>
      <div class="ssl">üîí SSL Seguro</div>
    </div>
  </div>

  <div class="right">
    <div class="auth-box">
      <div class="mobile-logo">
        <div class="mobile-logo-mark">üè†</div>
        <div class="mobile-logo-name">Prop<span>IA</span></div>
      </div>

      <div class="auth-switcher">
        <button class="auth-tab active" onclick="switchTab('login',this)">Iniciar Sesi√≥n</button>
        <button class="auth-tab" onclick="switchTab('register',this)">Crear Cuenta</button>
      </div>

      <form class="auth-form" id="loginForm" onsubmit="handleLogin(event)">
        <div>
          <div class="form-title">Bienvenido de nuevo</div>
          <div class="form-subtitle">Ingresa a tu cuenta de PropIA</div>
        </div>
        <div class="field"><label>Correo electr√≥nico</label><input type="email" id="loginEmail" placeholder="tu@email.com" required/></div>
        <div class="field"><label>Contrase√±a</label><input type="password" id="loginPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required/></div>
        <div class="alert" id="loginAlert"></div>
        <button type="submit" class="btn-submit" id="loginBtn">
          <span class="label">Entrar a PropIA</span>
          <span class="loading"><span class="spinner"></span>Verificando...</span>
        </button>
        <div class="divider">Plan Gratis disponible</div>
        <div class="plan-badge">üéÅ El plan <strong>Gratis</strong> incluye 5 listings y 20 leads al mes. Sin tarjeta de cr√©dito.</div>
      </form>

      <form class="auth-form hidden" id="registerForm" onsubmit="handleRegister(event)">
        <div>
          <div class="form-title">Crea tu cuenta</div>
          <div class="form-subtitle">Empieza gratis en menos de un minuto</div>
        </div>
        <div class="field"><label>Tu nombre completo</label><input type="text" id="regName" placeholder="Mar√≠a Gonz√°lez" required/></div>
        <div class="field"><label>Brokerage (opcional)</label><input type="text" id="regBrokerage" placeholder="Century 21, Keller Williams..."/></div>
        <div class="field"><label>Correo electr√≥nico</label><input type="email" id="regEmail" placeholder="tu@email.com" required/></div>
        <div class="field"><label>Contrase√±a</label><input type="password" id="regPassword" placeholder="M√≠nimo 8 caracteres" minlength="8" required/></div>
        <div class="alert" id="registerAlert"></div>
        <button type="submit" class="btn-submit" id="registerBtn">
          <span class="label">Crear Cuenta Gratis</span>
          <span class="loading"><span class="spinner"></span>Creando cuenta...</span>
        </button>
        <div class="plan-badge">üéÅ Empiezas en el plan <strong>Gratis</strong> autom√°ticamente. Mejora cuando quieras.</div>
      </form>
    </div>
  </div>
</div>

<script>
  const session = localStorage.getItem('propia_token');
  if (session) window.location.href = '/dashboard';

  function switchTab(tab, btn) {
    document.querySelectorAll('.auth-tab').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    if (tab === 'login') {
      document.getElementById('loginForm').classList.remove('hidden');
      document.getElementById('registerForm').classList.add('hidden');
    } else {
      document.getElementById('loginForm').classList.add('hidden');
      document.getElementById('registerForm').classList.remove('hidden');
    }
  }

  async function handleLogin(e) {
    e.preventDefault();
    const btn = document.getElementById('loginBtn');
    const al = document.getElementById('loginAlert');
    setLoading(btn, true); hide(al);
    try {
      const res = await fetch('/api/auth', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ action: 'login', email: document.getElementById('loginEmail').value.trim(), password: document.getElementById('loginPassword').value }) });
      const data = await res.json();
      if (!res.ok || !data.success) { show(al, data.error || 'Error al iniciar sesi√≥n.', 'error'); return; }
      localStorage.setItem('propia_token', data.token);
      localStorage.setItem('propia_user', JSON.stringify(data.user));
      window.location.href = '/dashboard';
    } catch { show(al, 'Error de conexi√≥n. Intenta de nuevo.', 'error'); }
    finally { setLoading(btn, false); }
  }

  async function handleRegister(e) {
    e.preventDefault();
    const btn = document.getElementById('registerBtn');
    const al = document.getElementById('registerAlert');
    setLoading(btn, true); hide(al);
    try {
      const res = await fetch('/api/auth', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ action: 'register', name: document.getElementById('regName').value.trim(), brokerage: document.getElementById('regBrokerage').value.trim(), email: document.getElementById('regEmail').value.trim(), password: document.getElementById('regPassword').value }) });
      const data = await res.json();
      if (!res.ok || !data.success) { show(al, data.error || 'Error al crear la cuenta.', 'error'); return; }
      show(al, '‚úÖ Cuenta creada. Ahora inicia sesi√≥n.', 'success');
      document.getElementById('registerForm').reset();
    } catch { show(al, 'Error de conexi√≥n. Intenta de nuevo.', 'error'); }
    finally { setLoading(btn, false); }
  }

  function setLoading(btn, v) { btn.disabled = v; btn.classList.toggle('is-loading', v); }
  function show(el, msg, type) { el.textContent = msg; el.className = `alert ${type} visible`; }
  function hide(el) { el.className = 'alert'; }
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PropIA ‚Äî IA para Agentes de Bienes Ra√≠ces Latinos</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet" />
  <style>
    :root {
      --bg: #07090f;
      --surface: #0f1420;
      --surface2: #161d2e;
      --border: rgba(255,255,255,0.07);
      --gold: #c9a84c;
      --gold-light: #e8c96a;
      --gold-dim: rgba(201,168,76,0.12);
      --text: #eeeae0;
      --muted: #7a8099;
      --radius: 14px;
      --success: #22c55e;
      --error: #ef4444;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      background: var(--bg);
      color: var(--text);
      font-family: 'DM Sans', sans-serif;
      min-height: 100vh;
      display: grid;
      grid-template-columns: 1fr 1fr;
      overflow: hidden;
    }
    @media (max-width: 768px) {
      body { grid-template-columns: 1fr; overflow: auto; }
      .left-panel { display: none; }
    }

    /* ‚îÄ‚îÄ LEFT PANEL ‚îÄ‚îÄ */
    .left-panel {
      position: relative;
      background: linear-gradient(160deg, #0d1526 0%, #07090f 60%);
      padding: 60px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      overflow: hidden;
    }
    .left-panel::before {
      content: '';
      position: absolute;
      inset: 0;
      background:
        radial-gradient(ellipse 70% 50% at 30% 20%, rgba(201,168,76,0.1) 0%, transparent 60%),
        radial-gradient(ellipse 50% 60% at 80% 90%, rgba(42,110,245,0.07) 0%, transparent 60%);
      pointer-events: none;
    }
    .left-panel::after {
      content: '';
      position: absolute;
      top: -100px; right: -100px;
      width: 400px; height: 400px;
      border: 1px solid rgba(201,168,76,0.08);
      border-radius: 50%;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 12px;
      position: relative;
      z-index: 1;
    }
    .logo-icon {
      width: 44px; height: 44px;
      background: linear-gradient(135deg, var(--gold), #8a5e1e);
      border-radius: 10px;
      display: flex; align-items: center; justify-content: center;
      font-size: 22px;
    }
    .logo-name {
      font-family: 'Playfair Display', serif;
      font-size: 24px; font-weight: 700;
    }
    .logo-name span { color: var(--gold); }

    .left-content {
      position: relative; z-index: 1;
    }
    .left-content h1 {
      font-family: 'Playfair Display', serif;
      font-size: 42px; font-weight: 700;
      line-height: 1.15; margin-bottom: 20px;
      letter-spacing: -0.5px;
    }
    .left-content h1 em { font-style: italic; color: var(--gold); }
    .left-content p {
      color: var(--muted); font-size: 16px;
      line-height: 1.65; max-width: 400px; margin-bottom: 40px;
    }

    .features-list {
      display: flex; flex-direction: column; gap: 14px;
    }
    .feat {
      display: flex; align-items: flex-start; gap: 14px;
    }
    .feat-icon {
      width: 36px; height: 36px; flex-shrink: 0;
      background: var(--gold-dim);
      border: 1px solid rgba(201,168,76,0.2);
      border-radius: 8px;
      display: flex; align-items: center; justify-content: center;
      font-size: 16px;
    }
    .feat-text { font-size: 14px; line-height: 1.5; }
    .feat-title { font-weight: 600; margin-bottom: 2px; }
    .feat-sub { color: var(--muted); font-size: 12px; }

    .left-footer {
      position: relative; z-index: 1;
      color: var(--muted); font-size: 12px;
    }

    /* ‚îÄ‚îÄ RIGHT PANEL ‚îÄ‚îÄ */
    .right-panel {
      background: var(--surface);
      display: flex; align-items: center; justify-content: center;
      padding: 40px;
      min-height: 100vh;
      overflow-y: auto;
    }

    .auth-box {
      width: 100%; max-width: 420px;
    }

    .auth-tabs {
      display: flex; gap: 4px;
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 10px; padding: 4px;
      margin-bottom: 32px;
    }
    .auth-tab {
      flex: 1; background: none; border: none;
      color: var(--muted); font-family: 'DM Sans', sans-serif;
      font-size: 14px; font-weight: 500; padding: 10px;
      border-radius: 7px; cursor: pointer; transition: all 0.18s;
    }
    .auth-tab.active {
      background: var(--surface2);
      color: var(--text); font-weight: 600;
    }

    .auth-form { display: flex; flex-direction: column; gap: 16px; }
    .auth-form.hidden { display: none; }

    .form-title {
      font-family: 'Playfair Display', serif;
      font-size: 26px; font-weight: 700;
      margin-bottom: 4px;
    }
    .form-subtitle { color: var(--muted); font-size: 14px; margin-bottom: 8px; }

    .field label {
      display: block; font-size: 11px; font-weight: 600;
      text-transform: uppercase; letter-spacing: 0.6px;
      color: var(--muted); margin-bottom: 7px;
    }
    .field input {
      width: 100%;
      background: var(--surface2);
      border: 1px solid var(--border);
      border-radius: 9px; color: var(--text);
      font-family: 'DM Sans', sans-serif;
      font-size: 14px; padding: 12px 14px;
      outline: none; transition: border-color 0.2s, box-shadow 0.2s;
    }
    .field input:focus {
      border-color: var(--gold);
      box-shadow: 0 0 0 3px rgba(201,168,76,0.1);
    }
    .field input::placeholder { color: #3a4158; }

    .btn-submit {
      width: 100%;
      background: linear-gradient(135deg, var(--gold), #9a6e20);
      border: none; border-radius: 10px;
      color: #07090f; font-family: 'DM Sans', sans-serif;
      font-size: 15px; font-weight: 700; padding: 14px;
      cursor: pointer; transition: opacity 0.2s, transform 0.1s;
      margin-top: 4px; position: relative;
    }
    .btn-submit:hover { opacity: 0.9; transform: translateY(-1px); }
    .btn-submit:active { transform: translateY(0); }
    .btn-submit:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
    .btn-submit .loading { display: none; align-items: center; justify-content: center; gap: 8px; }
    .btn-submit.is-loading .label { display: none; }
    .btn-submit.is-loading .loading { display: flex; }

    .spinner {
      width: 16px; height: 16px;
      border: 2px solid rgba(7,9,15,0.3);
      border-top-color: #07090f;
      border-radius: 50%;
      animation: spin 0.7s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    .divider {
      display: flex; align-items: center; gap: 12px;
      color: var(--muted); font-size: 12px;
    }
    .divider::before, .divider::after {
      content: ''; flex: 1; height: 1px;
      background: var(--border);
    }

    .plan-info {
      background: var(--gold-dim);
      border: 1px solid rgba(201,168,76,0.2);
      border-radius: 10px; padding: 14px 16px;
      font-size: 13px;
    }
    .plan-info strong { color: var(--gold); }

    .alert {
      border-radius: 8px; padding: 12px 14px;
      font-size: 13px; line-height: 1.5; display: none;
    }
    .alert.success { background: rgba(34,197,94,0.1); border: 1px solid rgba(34,197,94,0.3); color: #86efac; }
    .alert.error   { background: rgba(239,68,68,0.1);  border: 1px solid rgba(239,68,68,0.3);  color: #fca5a5; }
    .alert.visible { display: block; }
  </style>
</head>
<body>

<!-- ‚îÄ‚îÄ LEFT PANEL ‚îÄ‚îÄ -->
<div class="left-panel">
  <div class="logo">
    <div class="logo-icon">üè†</div>
    <div class="logo-name">Prop<span>IA</span></div>
  </div>

  <div class="left-content">
    <h1>La IA que trabaja<br>para <em>agentes latinos</em><br>en USA</h1>
    <p>Genera listings profesionales, califica leads autom√°ticamente y ret√©n a tus clientes con inteligencia artificial ‚Äî todo en espa√±ol.</p>

    <div class="features-list">
      <div class="feat">
        <div class="feat-icon">‚ö°</div>
        <div class="feat-text">
          <div class="feat-title">Contenido en 30 segundos</div>
          <div class="feat-sub">Descripci√≥n MLS, posts y email generados al instante</div>
        </div>
      </div>
      <div class="feat">
        <div class="feat-icon">ü§ñ</div>
        <div class="feat-text">
          <div class="feat-title">Calificaci√≥n autom√°tica de leads</div>
          <div class="feat-sub">Tu agente de IA trabaja 24/7 mientras t√∫ duermes</div>
        </div>
      </div>
      <div class="feat">
        <div class="feat-icon">üìä</div>
        <div class="feat-text">
          <div class="feat-title">Dashboard para brokers</div>
          <div class="feat-sub">Controla el performance de todo tu equipo en un lugar</div>
        </div>
      </div>
      <div class="feat">
        <div class="feat-icon">üîí</div>
        <div class="feat-text">
          <div class="feat-title">100% seguro y privado</div>
          <div class="feat-sub">Tus datos nunca salen de tu cuenta</div>
        </div>
      </div>
    </div>
  </div>

  <div class="left-footer">
    ¬© 2025 PropIA ¬∑ Hecho para la comunidad latina en USA
  </div>
</div>

<!-- ‚îÄ‚îÄ RIGHT PANEL ‚îÄ‚îÄ -->
<div class="right-panel">
  <div class="auth-box">

    <div class="auth-tabs">
      <button class="auth-tab active" onclick="switchTab('login',this)">Iniciar Sesi√≥n</button>
      <button class="auth-tab" onclick="switchTab('register',this)">Crear Cuenta</button>
    </div>

    <!-- LOGIN FORM -->
    <form class="auth-form" id="loginForm" onsubmit="handleLogin(event)">
      <div>
        <div class="form-title">Bienvenido de nuevo</div>
        <div class="form-subtitle">Ingresa a tu cuenta de PropIA</div>
      </div>
      <div class="field">
        <label>Correo Electr√≥nico</label>
        <input type="email" id="loginEmail" placeholder="tu@email.com" required />
      </div>
      <div class="field">
        <label>Contrase√±a</label>
        <input type="password" id="loginPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required />
      </div>
      <div class="alert" id="loginAlert"></div>
      <button type="submit" class="btn-submit" id="loginBtn">
        <span class="label">Entrar a PropIA</span>
        <span class="loading"><span class="spinner"></span> Verificando...</span>
      </button>
      <div class="divider">Plan Gratis disponible</div>
      <div class="plan-info">
        üéÅ El plan <strong>Gratis</strong> incluye 5 listings y 20 leads al mes.<br>Sin tarjeta de cr√©dito requerida.
      </div>
    </form>

    <!-- REGISTER FORM -->
    <form class="auth-form hidden" id="registerForm" onsubmit="handleRegister(event)">
      <div>
        <div class="form-title">Crea tu cuenta</div>
        <div class="form-subtitle">Empieza gratis en menos de un minuto</div>
      </div>
      <div class="field">
        <label>Tu Nombre Completo</label>
        <input type="text" id="regName" placeholder="Mar√≠a Gonz√°lez" required />
      </div>
      <div class="field">
        <label>Nombre del Brokerage (opcional)</label>
        <input type="text" id="regBrokerage" placeholder="Century 21, Keller Williams..." />
      </div>
      <div class="field">
        <label>Correo Electr√≥nico</label>
        <input type="email" id="regEmail" placeholder="tu@email.com" required />
      </div>
      <div class="field">
        <label>Contrase√±a</label>
        <input type="password" id="regPassword" placeholder="M√≠nimo 8 caracteres" minlength="8" required />
      </div>
      <div class="alert" id="registerAlert"></div>
      <button type="submit" class="btn-submit" id="registerBtn">
        <span class="label">Crear Cuenta Gratis</span>
        <span class="loading"><span class="spinner"></span> Creando cuenta...</span>
      </button>
      <div class="plan-info">
        üéÅ Empiezas con el plan <strong>Gratis</strong> autom√°ticamente.<br>Puedes mejorar tu plan cuando quieras.
      </div>
    </form>

  </div>
</div>

<script>
  // Redirigir si ya hay sesi√≥n
  const session = localStorage.getItem('propia_token');
  if (session) window.location.href = '/dashboard';

  function switchTab(tab, btn) {
    document.querySelectorAll('.auth-tab').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    if (tab === 'login') {
      document.getElementById('loginForm').classList.remove('hidden');
      document.getElementById('registerForm').classList.add('hidden');
    } else {
      document.getElementById('loginForm').classList.add('hidden');
      document.getElementById('registerForm').classList.remove('hidden');
    }
  }

  async function handleLogin(e) {
    e.preventDefault();
    const btn = document.getElementById('loginBtn');
    const alert = document.getElementById('loginAlert');
    setLoading(btn, true);
    hideAlert(alert);

    try {
      const res = await fetch('/api/auth', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          action: 'login',
          email: document.getElementById('loginEmail').value.trim(),
          password: document.getElementById('loginPassword').value
        })
      });

      const data = await res.json();

      if (!res.ok || !data.success) {
        showAlert(alert, data.error || 'Error al iniciar sesi√≥n.', 'error');
        return;
      }

      // Guardar sesi√≥n
      localStorage.setItem('propia_token', data.token);
      localStorage.setItem('propia_user', JSON.stringify(data.user));
      window.location.href = '/dashboard';

    } catch {
      showAlert(alert, 'Error de conexi√≥n. Intenta de nuevo.', 'error');
    } finally {
      setLoading(btn, false);
    }
  }

  async function handleRegister(e) {
    e.preventDefault();
    const btn = document.getElementById('registerBtn');
    const alert = document.getElementById('registerAlert');
    setLoading(btn, true);
    hideAlert(alert);

    try {
      const res = await fetch('/api/auth', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          action: 'register',
          name: document.getElementById('regName').value.trim(),
          brokerage: document.getElementById('regBrokerage').value.trim(),
          email: document.getElementById('regEmail').value.trim(),
          password: document.getElementById('regPassword').value
        })
      });

      const data = await res.json();

      if (!res.ok || !data.success) {
        showAlert(alert, data.error || 'Error al crear la cuenta.', 'error');
        return;
      }

      showAlert(alert, '‚úÖ Cuenta creada exitosamente. Revisa tu email para confirmar tu cuenta y luego inicia sesi√≥n.', 'success');
      document.getElementById('registerForm').reset();

    } catch {
      showAlert(alert, 'Error de conexi√≥n. Intenta de nuevo.', 'error');
    } finally {
      setLoading(btn, false);
    }
  }

  function setLoading(btn, isLoading) {
    btn.disabled = isLoading;
    btn.classList.toggle('is-loading', isLoading);
  }

  function showAlert(el, msg, type) {
    el.textContent = msg;
    el.className = `alert ${type} visible`;
  }

  function hideAlert(el) {
    el.className = 'alert';
  }
</script>
</body>
</html>
